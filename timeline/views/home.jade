- var swarms_url= "/"+user+"/swarms"
!!! 5
html(lang="en")
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")
    meta(bugswarm_api="#{bugswarm_api}")
    meta(bugswarm_consumer="#{bugswarm_consumer}")
    meta(resource="#{resource_id}")
    title BUGSwarm by BugLabs
  
    meta(name="description", content="")
    meta(name="author", content="Bug Labs, Inc.")
  
    link(rel="stylesheet", href="/stylesheets/jquery.jgrowl.css")
    link(rel="stylesheet", href="/stylesheets/jquery-ui/base/jquery.ui.autocomplete.css")
    link(rel="stylesheet", href="/stylesheets/tipTip.css")
    link(rel="stylesheet", href="/css/bugswarm.css")
    //if IE
      link(rel="stylesheet", href="/css/bugswarm.ie.css")
    script(language='javascript', type='text/javascript', src='/javascripts/support/html5.js')
    script(language='javascript', type='text/javascript', src='http://maps.google.com/maps/api/js?sensor=false')
    link(rel="stylesheet", href="/styles.css")

    -var env= process.env.NODE_ENV||'development'
    -if(env=='development')
      // script(src="/javascripts/support/swarm/dev/swarm-v0.3.2.js", type="text/javascript")
      script(src="http://cdn.buglabs.net/swarm/dev/swarm-v0.3.2.min.js", type="text/javascript")
    -if(env=='test')
      script(src="/javascripts/support/swarm/test/swarm-v0.3.2.min.js", type="text/javascript")
    -if(env=='integration')
      script(src="/javascripts/support/swarm/int/swarm-v0.3.2.min.js", type="text/javascript")
    -if(env=='staging')
      script(src="/javascripts/support/swarm/stage/swarm-v0.3.2.min.js", type="text/javascript")
    -if(env=='production')
      script(src="/javascripts/support/swarm/prod/swarm-v0.3.2.min.js", type="text/javascript")

  body
    .upbg
    header
      .hline
      .content-header.fixed
        .logos
          h1.buglabs
            a(href='http://www.buglabs.net', title='Buglabs', target='_blank') Buglabs
          h2.bugswarm
            a(href='index.html', title='Build, Connect, share. BUGSwarm') Build, Connect, share. BUGSwarms
        -if(user)
          .sign-out.r-all
            ul
              li.welcome
                span.light Welcome, &nbsp;
                span.user #{user}
              li.separator
              li.active
                a.sprite-icons.config(href='#') Config
          .config.dropdown.r-bottom(style='display:none;')
            nav
              ul
                li(style='display:none;')
                  a(href="#")
                    span.sprite-icons.edit 
                    | Edit Account
                li
                  - var apikeys_url= '/'+user+'/apikeys'
                  a(href="#{apikeys_url}")
                    span.sprite-icons.key 
                    | API Keys
                li.h-separator
                li
                  a(href="/account/logout")
                    span.sprite-icons.logout 
                    | Logout
        -else
          .sign-in.r-all
            ul
              li
                a.r-all(href='#')
                  | Log In
                  span.sprite-icons.arrow-down

    nav.fixed
      ul.navigation-bar.r-all
        li
          a.r-all(href='howitworks.html') HOW IT WORKS
        li.separator
        li
          a.r-all(href='documentation.html') DOCUMENTATION
        li.separator
        li
          a.r-all(href='#') BLOG
        li.separator
        li
          a.r-all(href='support.html') SUPPORT
    section.r-all.fixed.internal.double.sub
      nav#top-nav.r-top
        span.sprite-sections-xl.init-nav
        ul
          li
            a.r-top-s.sprite-icons.iconTab.notifications(href="#notifications")
              span.r-all-s.counter-notify 0
              | My Notifications
          li.content-loader
            span.ajax-loader-white
          li.my-swarms
            a.r-top-s(href='#MySwarms') My Swarms
          li.shared-swarms
            a.r-top-s(href='#Shared') Shared
          li.separator
          li.my-devices
            a.r-top-s(href='#MyResources') My Resources
          li.new-swarm(style='display:none;')
            a.r-top-s(href='#NewSwarm')
              span.sprite-icons.add
              | New Swarm
          li.new-resource(style='display:none;')
            a.r-top-s(href='#NewResource')
              span.sprite-icons.add
              | New Resource

        ul.button-actions
          li.new-resource-action
            a.r-all-s.button-link(href='#NewResource')
              span.sprite-icons.add
              | New Resource
          li.new-swarm-action
            a.r-all-s.button-link(href='#NewSwarm')
              span.sprite-icons.add
              | New Swarm
        ul.loading(style='display:none;')
          li
            span.ajax-loader-white
            p Connecting to Swarm ...
    #main
      != partial('mySwarms')
    footer.fixed
      nav
        ul
          li
            a.r-all(href='#') PARTNERS
          li.separator
          li
            a.r-all(href='#') DEVELOPERS
          li.separator
          li
            a.r-all(href='#') CONTACT US
        ul.aRight
          li
            a.r-all(href='#') LEGAL
        .clear
      details
        summary BUGLABS | Â© Copyright 2011.
        p All pages and graphics on this web site are the property of the company Buglabs.

    // jQuery
    script(src="/javascripts/thirdparty/jquery.js", type="text/javascript")

    // jQuery UI
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.core.min.js", type="text/javascript")
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.widget.min.js", type="text/javascript")
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.position.min.js", type="text/javascript")
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.autocomplete.min.js", type="text/javascript")
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.mouse.min.js", type="text/javascript")
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.draggable.min.js", type="text/javascript")
    script(src="/javascripts/thirdparty/jquery-ui/jquery.ui.droppable.min.js", type="text/javascript")


    // jQuery TipTip
    // http://code.drewwilson.com/entry/tiptip-jquery-plugin
    script(src="/javascripts/thirdparty/jquery.tipTip.minified.js", type="text/javascript")

    // jQuery Address
    script(src="/javascripts/thirdparty/jquery.address.js", type="text/javascript")

    // simplemodal
    script(src="/javascripts/thirdparty/jquery.simplemodal.1.4.1.min.js", type="text/javascript")

    // jGrowl
    script(src="/javascripts/thirdparty/jquery.jgrowl_minimized.js", type="text/javascript")

    // Underscore
    script(src="/javascripts/thirdparty/underscore.js", type="text/javascript")

    script(type="text/javascript")
      var socket;

    // The Client
    script(src="/javascripts/bugswarm.js", type="text/javascript")
    script(src="/javascripts/client.js", type="text/javascript")
    script(src="/javascripts/app.js", type="text/javascript")

    #my-keys-modal.dialog-content.r-all(style='width:450px;float:left;display:none;')
      section.r-all
        header.r-top
          h5 My API Keys
          .clear
        .form-container
          ul.form.oneCol
            li
              label Configuration Key
              .field
                input.r-all-s.input-data(type='text', readonly='readonly', name='configuration', value='')
                a#configuration-key.sprite-icons.refresh.aRight(href='#') Refresh
            li
              label Participation Key
              .field
                input.r-all-s.input-data(type='text', readonly='readonly', name='participation', value='')
                a#participation-key.sprite-icons.refresh.aRight(href='#') Refresh
          ul.form.oneCol.signin
            li
              p
                | Please enter your password in order to regenerate any of your keys
            li
              label Password
              .field
                input.r-all-s.input-data(type='password', name='password')

            li(style='display:none;')
              input#generate-keys.r-all-s(type='button', value='Regenerate Key')
          .clear

    -if(change_password[0])
      #change-password.dialog-content.r-all(style='width:450px;display:none;')
        section.r-all
          header.r-top
            h5 You should change your password
          .form-container
            ul.form.oneCol
              li
                label Current Password
                .field
                  input.old_password.r-all-s(type='text', name='old-password')
              li
                label New Password
                .field
                  input.submit.r-all-s(type='password', name='new-password')
              li
                label Confirm New Password
                .field
                  input.submit.r-all-s(type='password', name='confirm-new-password')
              li
                .field
                  input.submit.r-all-s(type='button', name='change-password', value='Change My Password')
            .ok(style='display:none;')
              span.ajax-loader(style='display:none;') &nbsp;
              p.message
                span.error(style='display:none;') An error ocurred trying to update your password
                span.success(style='display:none;') Your password has been changed successfully!
                span.updating(style='display:none;') Updating your password ...
